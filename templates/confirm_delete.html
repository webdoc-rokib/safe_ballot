{% extends 'base.html' %}
{% block page_icon %}
  <svg class="icon-sm" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M3 6h18M8 6v12M16 6v12" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round" fill="none"/></svg>
{% endblock %}
{% block content %}
<div class="card">
  <div class="card-body">
    {% if type == 'publish' %}
      <h4>Publish results</h4>
      <p>Are you sure you want to publish results for: <strong>{{ object }}</strong>?</p>
    {% if bypass %}
        <form method="post">{% csrf_token %}
      <p class="text-muted">No key required.</p>
          <button class="btn btn-warning">Confirm and publish</button>
          <a class="btn btn-link" href="javascript:history.back()">Cancel</a>
        </form>
      {% elif require_key %}
        <form method="post">{% csrf_token %}
          <div class="mb-3">
            <label class="form-label">Publish key</label>
            <input type="password" name="key" class="form-control" placeholder="Enter your publish key" required>
            <div class="form-text">This key was shown when the election was created. Keep it private.</div>
          </div>
          <button class="btn btn-warning">Confirm and publish</button>
          <a class="btn btn-link" href="javascript:history.back()">Cancel</a>
        </form>
      {% else %}
        <form method="post">{% csrf_token %}
          <div class="mb-3">
            <label class="form-label">Create a publish key</label>
            <input type="password" name="key" class="form-control" placeholder="Create a secure key" required>
          </div>
          <div class="mb-3">
            <label class="form-label">Confirm key</label>
            <input type="password" name="key_confirm" class="form-control" placeholder="Confirm key" required>
          </div>
          <button class="btn btn-primary">Set key and publish</button>
          <a class="btn btn-link" href="javascript:history.back()">Cancel</a>
        </form>
      {% endif %}
    {% else %}
      <h4>Confirm delete</h4>
      <p>Are you sure you want to delete this {{ type }}: <strong>{{ object }}</strong>?</p>
      <form method="post">{% csrf_token %}
        <button class="btn btn-danger">Yes, delete</button>
        <a class="btn btn-link" href="javascript:history.back()">Cancel</a>
      </form>
    {% endif %}
  </div>
</div>
{% endblock %}
