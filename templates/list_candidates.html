{% extends 'base.html' %}
{% load utils %}
{% block page_icon %}
  <svg class="icon-sm" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" aria-hidden="true"><path d="M12 2l4 7h6l-5 4 2 7-7-4-7 4 2-7-5-4h6z" stroke="currentColor" stroke-width="1" stroke-linejoin="round" fill="none"/></svg>
{% endblock %}
{% block content %}
<h2>Candidates for {{ election.title }}</h2>
<p><a class="btn btn-primary" href="{% url 'create_candidate' election.id %}">Create Candidate</a></p>
<table class="table">
  <thead><tr><th>Name</th><th>Bio</th><th>Votes</th><th></th></tr></thead>
  <tbody>
    {% for c in candidates %}
      <tr>
        <td>{{ c.name }}</td>
        <td>{{ c.bio|truncatechars:80 }}</td>
  <td>{{ tally|get_item:c.id|default:0 }}</td>
        <td>
          <a class="btn btn-sm btn-outline-secondary" href="{% url 'edit_candidate' election.id c.id %}">Edit</a>
          <form method="post" action="{% url 'delete_candidate' election.id c.id %}" style="display:inline-block">{% csrf_token %}
            <button class="btn btn-sm btn-danger">Delete</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
